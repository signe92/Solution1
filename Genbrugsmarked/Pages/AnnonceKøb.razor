@page "/annoncekøb/{id:int}"
@using Core.Klasser
@using Genbrugsmarked.Service
@inject IAnnonceService annonceService

<h3>@annonce?.Titel</h3>

@if (annonce != null)
{
    <p>Beskrivelse: @annonce.Beskrivelse</p>
    <p>Pris: @annonce.Pris</p>
    <p>Oprettet: @annonce.OprettetDato.ToShortDateString()</p>
    
    <button class="btn btn-primary" @onclick="KøbAnnonce"
            disabled="@annonce.Status">
        @(annonce.Status ? "Reserveret" : "Køb")
    </button>
}
else
{
    <p>Indlæser annoncen...</p>
}

@code {
    [Parameter] public int id { get; set; }
    private Annonce annonce;

    protected override void OnInitialized()
    {
        var alleAnnoncer = new List<Annonce>
        {
            new Annonce { AnnonceID = 1, Titel = "Bluse", Beskrivelse = "God stand, kun brugt få gange", Pris = 500, Status = false, OprettetDato = DateTime.Now },
            new Annonce { AnnonceID = 2, Titel = "Trøje", Beskrivelse = "Fin stand, brugt en del, men ingen brugstegn", Pris = 200, Status = false, OprettetDato = DateTime.Now }
        };
        annonce = annonceService.alleAnnoncer.FirstOrDefault(a => a.AnnonceID == id);
    }

    private void KøbAnnonce()
    {
        annonce.Status = true;
    }
}